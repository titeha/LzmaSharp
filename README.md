# LzmaSharp

Порт/реализация LZMA2 на C# (.NET 10) с упором на:
- максимальную производительность (в т.ч. SIMD/unsafe, позже — FASM),
- экономию памяти (пулы буферов, контроль словаря/окон),
- корректность и совместимость (кросс-проверки с 7-Zip).

> Статус: активная разработка. Сначала — рабочий декодер/энкодер + тесты и бенчмарки. Затем оптимизации.

## Структура репозитория

```
LzmaSharp.sln
src/
  LzmaCore/        # Ядро: LZMA2 encode/decode (без UI/без шифрования)
  LzmaCli/         # Утилита для ручных прогонов (не основной продукт)
tests/
  LzmaTests/       # NUnit: регресс и совместимость
bench/
  LzmaBench/       # BenchmarkDotNet: скорость/аллокации/память
vendor/
  lzma-sdk/        # исходники LZMA SDK (upstream, как эталон)
  7zip/            # (опционально) исходники 7-Zip (reference)
docs/
  ARCHITECTURE.md
  ROADMAP.md
THIRD_PARTY_NOTICES.md
```

## Сборка и тесты

Требования:
- .NET SDK 10
- Windows/Linux/macOS: сборка ядра и тестов кроссплатформенная

Команды:
```bash
dotnet build
dotnet test
```

Бенчмарки:
```bash
dotnet run -c Release --project bench/LzmaBench
```

## Принципы разработки

- Сначала корректность (тесты, кросс-проверки), затем ускорение.
- Минимум аллокаций: `ArrayPool`, `Span<T>`, аккуратная буферизация.
- Оптимизации только по профилю/бенчу: сначала алгоритмы, затем SIMD/FASM.

## Лицензирование

- Код проекта (C#) — см. файл `LICENSE`.
- Upstream-исходники в `vendor/` распространяются по их собственным лицензиям/условиям
  (см. `THIRD_PARTY_NOTICES.md` и файлы внутри `vendor/`).

## Документация

- `docs/ARCHITECTURE.md` — архитектурные решения
- `docs/ROADMAP.md` — план работ
