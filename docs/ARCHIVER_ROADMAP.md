# Дорожная карта: от LZMA2 кодека к полноценному архиватору

## Модуль 1: `LzmaCore` (кодеки)

**Что делаем:**

- LZMA decoder ✅ (уже есть)
- LZMA2 decoder ✅ (уже есть)
- LZMA2 encoder ⬅️ следующий шаг

**Почему важно:** пока нет энкодера — мы не можем строить архивы, только распаковку.

## Модуль 2: `LzmaArchive` (контейнер)

Это слой, который отвечает за «много файлов»:

- список файлов, пути, атрибуты, время
- CRC/хэши
- блоки данных (solid / non-solid)
- опционально шифрование

### MVP контейнер

Чтобы не прыгать сразу в 7z (он большой и сложный), можно сделать «MVP архив»:

- Header (магическое число + версия)
- Таблица файлов (имя, размер, оффсет, CRC)
- Данные файлов последовательно, каждый файл отдельно сжат LZMA2

Это даст:

- быстрое создание/извлечение
- параллелизацию по файлам

Дальше можно перейти к совместимости с 7z.

## Модуль 3: CLI

Команда уровня `lzma` / `lzma-sharp`:

- `pack <folder> -> archive.lzs`
- `unpack <archive> -> folder`
- `list <archive>`

CLI нужен, чтобы легко гонять тесты на реальных данных.

## Модуль 4: производительность

**Правило:** сначала корректность + тесты, потом оптимизация.

- BenchmarkDotNet
- dotnet-trace / PerfView
- оптимизация аллокаций, ArrayPool
- unsafe + Intrinsics
- многопоток: pipeline (read → chunk → compress tasks → write)

## Модуль 5: UI / Service

Когда core стабилен:

- GUI (WPF/WinUI/MAUI)
- Windows Service (Worker Service)
- серверный режим (ASP.NET minimal API)

